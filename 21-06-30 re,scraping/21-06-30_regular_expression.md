# :: 정규표현식



## 스크레이핑과 관련한 유닉스 명령어

* #### grep

  - 표준 입력 또는 파일에서 패턴에 맞는 줄을 찾아 표준 출력에 출력하는 명령어

  ```bash
  $ grep <패턴> <파일 이름(여러 개 지정 가능)>
  ```

  

  ```bash
  <예시>
  $ ps x | grep /usr/libexec/
  ```

**참고 :** 

1. **!!** : 이전 명령어
2. **^(a)^(b)** : 이전 명령어 중 a의 글자를 b로 바꾸고 실행



* #### sed

  * 문자열의 특정 내용을 변경하거나 줄 단위로 데이터를 추출할 때 사용할 수 있다.
    필터링과 텍스트를 변환하는 스트림 편집기. **<u>원본 변화없이</u>**, 출력 결과를 변화

  ```bash
  $ sed 's/찾을텍스트/바꿀텍스트/' 파일명
  ```

  ```bash
  <예시>
  # 장: -> 장
  $ sed s/장:/장/ sample.txt
  
  # new_sample.txt로 저장
  $ !! > new_smaple.txt
  ```

  

## 정규식 [#](http://www.incodom.kr/Linux/기본명령어/sed#h_7c4a66fe83026b803bd0836f3b267cc2)

- []: 한문자 매치
- ^: 라인 맨앞
- $: 라인 끝
- &: 검색문자열 치환
- \<: 단어의 시작
- \>: 단어의 끝
- x{m,n}: m,n 구간 반복



## 연산자 [#](http://www.incodom.kr/Linux/기본명령어/sed#h_03b99947ab0db6a54a7b644acb91ac87)

- [범위]/p: 지정 범위 출력
- [범위]/d: 지정 범위 삭제
- [범위]/문자1/문자2: 지정된 범위의 처음 나타난 문자를 문자2로
- s/문자1/문자2/: 문자1을 2로
- g: 모든 라인에 적용



### 실습

```bash
# index.html에서 class="title-text" 인 부분을 추출
$ grep class=\"title-text\" index.html

# 추출한 결과에 <span class="title-text">라는 앞글자의 모두를 빈 문자열로 변환해서 제거
$  grep class=\"title-text\" index.html | sed -E 's/.*\"title-text\"//'

# 뒤에 있는 </span>을 제거
# sed명령어는 세미콜론을 사용해서 여러 개의 패턴을 지정할 수 있다.
$ grep class=\"title-text\" index.html | sed -E 's/.*\"title-text\">//'|;s/<\/span>//'
```



---



## python - 정규표현식 모듈



**[ 반복 메타 문자 ]**

| **[메타 문자]** | **[의미]**           |
| --------------- | -------------------- |
| *               | 0회 이상 반복        |
| +               | 1회 이상 반복        |
| ?               | 0회 or 1회           |
| {m}             | m회 반복             |
| {m, n}          | m회부터 n회까지 반복 |

 

**[ 매칭 메타 문자 ]**

| **[메타 문자]** | **[의미]**                                      |
| --------------- | ----------------------------------------------- |
| .               | 줄바꿈 문자를 제외한 모든 문자 중 하나와 매치됨 |
| ^               | 문자열의 시작과 매치됨                          |
| $               | 문자열의 마지막과 매치됨                        |
| [ ]             | 괄호 내부에 포함된 문자 중 한 문자와 매치 *     |
| \|              | 또는(or)를 의미                                 |
| { }             | 정규식을 그룹으로 묶음 *                        |
| ( )             | ( )로 감싼 부분을 하나의 패턴으로 묶음          |
| (n)             | 바로 앞의 패턴이 n번 나오는지 확인              |



**[ 이스케이프 기호 ]**

| **[종류]** | **[설명]**                                                  |
| ---------- | ----------------------------------------------------------- |
| \\         | 역슬래쉬 문자 자체                                          |
| \d         | 모든 숫자와 매치됨 [0-9]                                    |
| \D         | 숫자가 아닌 문자와 매치됨 [^0-9]                            |
| \s         | 화이트 스페이스 문자와 매치됨 [ \t\n\r\f\v]                 |
| \S         | 화이트 스페이스가 아닌 것과 매치됨 [^ \t\n\r\f\v]           |
| \w         | 숫자 또는 문자와 매치됨 [a-zA-Z0-9_]                        |
| \W         | 숫자 또는 문자가 아닌 것과 매치됨 [^a-zA-Z0-9_]             |
| \b         | 단어의 경계를 나타냄. 단어는 영문자 혹은 숫자의 연속 문자열 |
| \B         | 단어의 경계가 아님을 나타냄                                 |
| \A         | 문자열의 처음에만 일치                                      |
| \Z         | 문자열의 끝에만 일치                                        |



**[ re모듈의 주요 메소드 ]**

| **[메소드]**                           | **[설명]**                                                   |
| -------------------------------------- | ------------------------------------------------------------ |
| compile(pattern[, flags])              | pattern을 컴파일하여 정규식 객체를 반환                      |
| match(pattern, string[,flags])         | string의 시작부분부터 pattern이 존재하는지 검사하여MatchObject 인스턴스를 반환 |
| search(pattern, string[,flags])        | string의 전체에 대해서 pattern이 존재하는지 검사하여MatchObject 인스턴스를 반환 |
| split(pattern, string[, maxplit=0])    | pattern을 구분자로 string을 분리하여 리스트로 반환           |
| findall(pattern, string[, flags])      | string에서 pattern을 만족하는 문자열을 리스트로 반환         |
| finditer(pattern, string[, flags])     | string에서 pattern을 만족하는 문자열을 반복자로 반환         |
| sub(pattern, repl, string[, count=0])  | string에서 pattern과 일치하는 부분에 대하여repl로 교체하여 결과 문자열을 반환 |
| subn(pattern, repl, string[, count=0]) | sub와 동일하나, 결과로(결과문자열, 매칭횟수)를튜플로 반환    |
| escape(string)                         | 영문자 숫자가 아닌 문자들을 백슬래쉬 처리해서 리턴.(임의의 문자열을 정규식 패턴으로 사용할 경우 유용) |



**[ Match 객체 ]**

Match객체는 match(), search()의 수행 결과로 생성되며, 검색된 결과를 효율적으로 처리할 수 있는 기능 제공.

◎ Match객체가 지원하는 메소드와 속성

| **[메소드]**         | **[속성]**                                                   |
| -------------------- | ------------------------------------------------------------ |
| group([group1, ...]) | 입력받은 인덱스에 해당하는 매칭된 문자열 결과의 부분 집합을 반환합니다.인덱스가 '0'이거나 입력되지 않은 경우 전체 매칭 문자열을 반환합니다. |
| groups()             | 매칭된 결과를 튜플 형태로 반환                               |
| groupdict()          | 이름이 붙여진 매칭 결과를 사전 형태로 반환                   |
| start([group])       | 매칭된 결과 문자열의 시작 인덱스를 반환. (인자로 부분 집합의 번호나명시된 이름이 전달된 경우, 그에 해당하는 시작 인덱스를 반환) |
| end([group])         | 매칭된 결과 문자열의 종료 인덱스를 반환. (인자로 부분 집합의 번호나명시된 이름이 전달된 경우, 그에 해당하는 종료 인덱스를 반환) |
| pos                  | 원본 문자열에서 검색을 시작하는 위치입니다.                  |
| endpos               | 원본 문자열에서 검색을 종료하는 위치입니다.                  |
| lastindex            | 매칭된 결과 집합에서 마지막 인덱스 번호를 반환. (일치된 결과가 없는 경우에는 None을 반환) |
| lastgroup            | 매칭된 결과 집합에서 마지막으로 일치한 이름을 반환. (정규식의 매칭 조건에이름이 지정되지 않았거나 일치된 결과가 없는 경우 None 반환) |
| string               | 매칭의 대상이 되는 원본 문자열입니다.                        |

